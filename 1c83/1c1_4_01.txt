//Отчет СКД
//История ЖКУ по сотруднику

ВЫБРАТЬ
	УчетЖКУОстаткиИОбороты.Период КАК ПериодДанных,
	УчетЖКУОстаткиИОбороты.Общежитие,
	УчетЖКУОстаткиИОбороты.ВидЖКУ,
	УчетЖКУОстаткиИОбороты.СуммаПриход,
	УчетЖКУОстаткиИОбороты.СуммаРасход,
	УчетЖКУОстаткиИОбороты.СуммаРасход - УчетЖКУОстаткиИОбороты.СуммаПриход КАК Долг,
	ВЫБОР
		КОГДА &ВыводитьТолькоДолги = 1
			ТОГДА ВЫБОР
					КОГДА УчетЖКУОстаткиИОбороты.СуммаРасход - УчетЖКУОстаткиИОбороты.СуммаПриход < 0
						ТОГДА ИСТИНА
					ИНАЧЕ ЛОЖЬ
				КОНЕЦ
		ИНАЧЕ ИСТИНА
	КОНЕЦ КАК ПризнакОтбора1
ПОМЕСТИТЬ ТблВыборИзРегистра
ИЗ
	РегистрНакопления.УчетЖКУ.ОстаткиИОбороты(
			&НачПериод,
			&КонПериод,
			Месяц,
			,
			Сотрудник = &Сотрудник
				И Учреждение = &Учреждение) КАК УчетЖКУОстаткиИОбороты
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТблВыборИзРегистра.ПериодДанных,
	ТблВыборИзРегистра.Общежитие,
	ТблВыборИзРегистра.ВидЖКУ,
	ТблВыборИзРегистра.СуммаПриход,
	ТблВыборИзРегистра.СуммаРасход,
	ТблВыборИзРегистра.Долг
ИЗ
	ТблВыборИзРегистра КАК ТблВыборИзРегистра
ГДЕ
	ТблВыборИзРегистра.ПризнакОтбора1 = ИСТИНА
