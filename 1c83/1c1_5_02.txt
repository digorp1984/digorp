//регистрация заявки
&НаСервере
Процедура ЗаписатьЗаявку(ФИО, НазваниеОрганизации, Телефон, Почта, Логин, Пароль)
	
	НаборЗаписей=РегистрыСведений.СписокЗаявокНаДоступКВебПриложению.СоздатьМенеджерЗаписи();
	НаборЗаписей.Прочитать();
	
	НаборЗаписей.ДатаЗаявки=ТекущаяДата();
	НаборЗаписей.Логин=Логин;
	НаборЗаписей.Пароль=Пароль;
	НаборЗаписей.ФИО=ФИО;
	НаборЗаписей.НазваниеОрганизации=НазваниеОрганизации;
	НаборЗаписей.Почта=Почта;
	НаборЗаписей.Телефон=Телефон;
	НаборЗаписей.Записать();
	
КонецПроцедуры

//подать заявку на регистрацию
&НаКлиенте
Процедура ПодключитьПользователя(Команда)
	
	//проверка заполнения реквизитов
	ОчиститьСообщения();
	ОшибкаПроверки=Ложь;
	Если СокрЛП(Элементы.ФИО.ТекстРедактирования)="" Тогда
		Сообщить("Не заполнен параметр - ФИО!");
		ОшибкаПроверки=Истина;
	КонецЕсли;
	Если СокрЛП(Элементы.НазваниеОрганизации.ТекстРедактирования)="" Тогда
		Сообщить("Не заполнен параметр - название организации!");
		ОшибкаПроверки=Истина;
	КонецЕсли;
	Если СокрЛП(Элементы.Телефон.ТекстРедактирования)="" Тогда
		Сообщить("Не заполнен параметр - Телефон!");
		ОшибкаПроверки=Истина;
	КонецЕсли;
	Если СокрЛП(Элементы.Логин.ТекстРедактирования)="" Тогда
		Сообщить("Не заполнен параметр - Логин!");
		ОшибкаПроверки=Истина;
	КонецЕсли;
	Если СокрЛП(Элементы.Пароль.ТекстРедактирования)="" Тогда
		Сообщить("Не заполнен параметр - Пароль!");
		ОшибкаПроверки=Истина;
	КонецЕсли;
	Если ОшибкаПроверки=Истина Тогда
		Возврат;
	КонецЕсли;
	
	//проверка логина
	Если МодульУправляемогоПриложения.ПроверитьЛогин(СокрЛП(Элементы.Логин.ТекстРедактирования))=Ложь Тогда
		Сообщить("Введенный логин уже есть в системе!");
		Возврат;
	КонецЕсли;
	
	//регистрация заявки
	ЗаписатьЗаявку(СокрЛП(Элементы.ФИО.ТекстРедактирования), СокрЛП(Элементы.НазваниеОрганизации.ТекстРедактирования),
		СокрЛП(Элементы.Телефон.ТекстРедактирования), СокрЛП(Элементы.Почта.ТекстРедактирования), СокрЛП(Элементы.Логин.ТекстРедактирования),
		СокрЛП(Элементы.Пароль.ТекстРедактирования));
	
	//завершение
	Сообщить("Заявка успешно отправлена на регистрацию. Через некоторое время с вами свяжутся!");
	Элементы.СообщениеУспешное.Видимость=Истина;
	
КонецПроцедуры
