--------------------------------------------------------------------------------------------------------
Запрос - СКД
--------------------------------------------------------------------------------------------------------

ВЫБРАТЬ
	"01. ОБЩИЕ" КАК ВидДоработки
ПОМЕСТИТЬ ВТДанные

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	"02. КОСТАНТЫ"

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	"03. СПРАВОЧНИКИ"

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	"04. ДОКУМЕНТЫ"

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	"05. ПЕРЕЧИСЛЕНИЯ"

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	"06. ОТЧЕТЫ"

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	"07. ОБРАБОТКИ"

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	"08. РЕГИСТРЫ СВЕДЕНИЙ"

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	"09. РЕГИСТРЫ НАКОПЛЕНИЯ"

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	"10. ВНЕШНИЕ ФАЙЛЫ"
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТДанные.ВидДоработки
ИЗ
	ВТДанные КАК ВТДанные
ГДЕ
	ВЫБОР
			КОГДА &ОтборВидДоработки = "БЕЗ ОТБОРА"
					ИЛИ &ОтборВидДоработки = ""
				ТОГДА ИСТИНА
			ИНАЧЕ ВЫБОР
					КОГДА ВТДанные.ВидДоработки = &ОтборВидДоработки
						ТОГДА ИСТИНА
					ИНАЧЕ ЛОЖЬ
				КОНЕЦ
		КОНЕЦ
    
--------------------------------------------------------------------------------------------------------
Код формирования отчета
--------------------------------------------------------------------------------------------------------

#Область ОбработчикиСобытий

Процедура ПриКомпоновкеРезультата(ДокументРезультат, ДанныеРасшифровки, СтандартнаяОбработка)
	
	// определение общих запросов
	ИнициализироватьОтчет();
	
	// Очистка результата
	СтандартнаяОбработка = ложь;
	ДокументРезультат.Очистить();
	
	// Чтение параметров из настроек
	НастройкиОтчета = КомпоновщикНастроек.ПолучитьНастройки();
	
	// Выбор данных из отчета
	КомпоновщикМакета = Новый КомпоновщикМакетаКомпоновкиДанных;
	
	МакетКомпоновки = КомпоновщикМакета.Выполнить(СхемаКомпоновкиДанных, НастройкиОтчета, , , Тип("ГенераторМакетаКомпоновкиДанныхДляКоллекцииЗначений"));
		
	ПроцессорКомпоновки = Новый ПроцессорКомпоновкиДанных;
	ПроцессорКомпоновки.Инициализировать(МакетКомпоновки);
	
	ПроцессорВывода = Новый ПроцессорВыводаРезультатаКомпоновкиДанныхВКоллекциюЗначений;
	
	ТаблицаДанных =  Новый ТаблицаЗначений;
	ПроцессорВывода.УстановитьОбъект(ТаблицаДанных);
	ПроцессорВывода.Вывести(ПроцессорКомпоновки);
	
	// Формирование отчета
	
	//параметры отчета
	ДокументРезультат.ИмяПараметровПечати = "ПАРАМЕТРЫ_ПЕЧАТИ_ОФК_ОтчетПоДоработкам";
	ДокументРезультат.КлючПараметровПечати = "КЛЮЧ_ПАРАМЕТРОВ_ПЕЧАТИ_ОФК_ОтчетПоДоработкам";
	
	ДокументРезультат.ОриентацияСтраницы = ОриентацияСтраницы.Портрет;
	ДокументРезультат.АвтоМасштаб = Истина;
	ДокументРезультат.ПолеСверху = 10;
	ДокументРезультат.ПолеСнизу = 10;
	ДокументРезультат.ПолеСлева = 10;
	ДокументРезультат.ПолеСправа = 10;
	
	Макет = УправлениеПечатью.МакетПечатнойФормы("ОбщийМакет.ОФК_Доработки");
	
	СтруктураОбластей = Новый Структура;
	СтруктураОбластей.Вставить("ОбластьШапка",	Макет.ПолучитьОбласть("ОбластьШапка"));
	СтруктураОбластей.Вставить("Область01",		Макет.ПолучитьОбласть("Область01"));
	СтруктураОбластей.Вставить("Область02",		Макет.ПолучитьОбласть("Область02"));
	СтруктураОбластей.Вставить("Область03",		Макет.ПолучитьОбласть("Область03"));
	СтруктураОбластей.Вставить("Область04",		Макет.ПолучитьОбласть("Область04"));
	СтруктураОбластей.Вставить("Область05",		Макет.ПолучитьОбласть("Область05"));
	СтруктураОбластей.Вставить("Область06",		Макет.ПолучитьОбласть("Область06"));
	СтруктураОбластей.Вставить("Область07",		Макет.ПолучитьОбласть("Область07"));
	СтруктураОбластей.Вставить("Область08",		Макет.ПолучитьОбласть("Область08"));
	СтруктураОбластей.Вставить("Область09",		Макет.ПолучитьОбласть("Область09"));
	СтруктураОбластей.Вставить("Область10",		Макет.ПолучитьОбласть("Область10"));
	
	//вывод шапки
	ДокументРезультат.Вывести(СтруктураОбластей.ОбластьШапка);
	
	//вывод разделов
	Для Каждого СтрокаДанных Из ТаблицаДанных Цикл
		
		КодОбласти = Лев(СтрокаДанных.ВидДоработки, 2);
		ДокументРезультат.Вывести(СтруктураОбластей["Область" + КодОбласти]);
		
	КонецЦикла;

КонецПроцедуры

#КонецОбласти
