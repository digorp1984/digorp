Процедура ПечатьТН()
	
	Таб = СоздатьОбъект("Таблица");
	Таб.ИсходнаяТаблица("ТН"); 
	
	Счет30404=СчетПоКоду("304.04.1");
	МОЛОтправитель           = ОтветственныйСклад.МОЛ;
	ПодразделениеОтправитель = ОтветственныйСклад.Подразделение;
	МОЛПолучатель            = ОтветственныйГараж.МОЛ;
	ПодразделениеПолучатель  = ОтветственныйГараж.Подразделение;

	Если Проведен()=0 Тогда
		ТекстПредупреждения = "Для непроведенного документа графы ""Цена"" и ""Сумма"" не заполняются.";
		Таб.ВывестиСекцию("Предупреждение");
	КонецЕсли;	

	Номер = глПреобразоватьНомерДок(НомерДок,ВыбраннаяФирма);					

	СписокДанных=СоздатьОбъект("СписокЗначений");
	СписокДанных.Установить( "Контекст", 				Контекст);
	СписокДанных.Установить( "Дата", 					ДатаДок );
	СписокДанных.Установить( "ОфициальноеНаименование","" ); 
	СписокДанных.Установить( "КодОКПО", "" );
	
	ГлПолучитьДанные(СписокДанных);   
	
	ОргНазв	= СписокДанных.Получить("ОфициальноеНаименование");
	КодОКПО	= СписокДанных.Получить("КодОКПО");
	ПодразделениеОтправитель_М11 = ПодразделениеОтправитель;
	ПодразделениеПолучатель_М11  = ПодразделениеПолучатель;
	СчетРасхода_М11   = "";
	КодАналитики_М11  = "";
	МОЛПолучатель_М11 = глФИО(МОЛПолучатель);

	Таб.ВывестиСекцию("Заголовок");
	Таб.ВывестиСекцию("Шапка");
	                            
	СуммаИтого_М11_1  = 0;
	ВыбратьСтроки();
	Пока ПолучитьСтроку() = 1 Цикл
		ГСМРаб=ГСМ;
		Если (ПустоеЗначение(Масло)=0) и (ПустоеЗначение(ПредыдущаяЕРВ)=0) Тогда
			ГСМРаб=Масло;
		КонецЕсли;
		
		СчетМЦ_М11_  = глКодСчета(СчКт,"","","");  
		СчетМЦ_М11 = "";
		глТриКода(СчетМЦ_М11_,"",СчетМЦ_М11,"");

		КодМЦ_М11       = СокрЛП(ГСМРаб.Код);
		Наимен_М11      = ?(ПустоеЗначение(ГСМРаб.ПолнНаимен) = 1,СокрЛП(ГСМРаб.Наименование),СокрЛП(ГСМРаб.ПолнНаимен));

		НомНомер_М11  = СокрЛП(ГСМРаб.НомНомер);
		НомНомер_М11  = ?(ПустоеЗначение(НомНомер_М11) = 1,СокрЛП(ГСМРаб.Код),НомНомер_М11);

		ЕдИзмКод_М11    = "166";
		ЕдИзм_М11       = "кг";
		Затребовано_М11 = ФорматК(ВыданоКГ);
		Количество_М11  = ФорматК(ВыданоКГ); 

		Если Проведен() = 0 Тогда
			Цена_М11  = "---";
			Сумма_М11 = "---";
		Иначе	
			Если СчКт=Счет30404 Тогда
				Цена_М11_1  = ЦенаЕд;
			Иначе
				РезультатИт=ПолучитьЦенуИКолОстаткаПо105Счету(ВыбраннаяФирма,ДатаДок,СчКт,ГСМРаб,КБК,ОтветственныйСклад);
				Цена_М11_1  = РезультатИт.Получить("Цена");
			КонецЕсли;
			Сумма_М11_1 = Окр(Цена_М11_1*ВыданоКГ,2);
			Цена_М11  = ФорматС(Цена_М11_1);
			Сумма_М11 = ФорматС(Сумма_М11_1);
			СуммаИтого_М11_1=СуммаИтого_М11_1+Сумма_М11_1;
		КонецЕсли;	
		Таб.ВывестиСекцию("Строка");
	КонецЦикла;	                 
	
	ЗатребованоИтог_М11 = ФорматС(Итог("ВыданоКГ"));
	КоличествоИтог_М11  = ФорматС(Итог("ВыданоКГ"));
	Если Проведен() = 0 Тогда
		СуммаИтого_М11  = "---";
	Иначе	
		СуммаИтого_М11  = ФорматС(СуммаИтого_М11_1);
	КонецЕсли;	
	Таб.ВывестиСекцию("Итого");

    МОЛДолжность_М11 = МОЛОтправитель.Должность.Получить(ДатаДок);
	МОЛИмя_М11 = глФИО(МОЛОтправитель,1);
    МОЛДолжностьПолучатель_М11 = МОЛПолучатель.Должность.Получить(ДатаДок);
	МОЛИмяПолучатель_М11 = глФИО(МОЛПолучатель,1);

	Таб.ВывестиСекцию("Подвал");
	Если Проведен() = 0 Тогда
		Таб.Опции(0,0,1,0);    
		Таб.ОбластьПечати(2);
	Иначе	
		Таб.Опции(0,0,0,0);    
	КонецЕсли;	
	Таб.ТолькоПросмотр(1);
	Таб.ПараметрыСтраницы(1,,,2,0);
	Таб.Показать("Требование - накладная (печать из ЕРВ) " + ДатаДок);
	
КонецПроцедуры
