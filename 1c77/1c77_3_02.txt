//Расчет цены и остаточного кол-ва по счету 105
//     РезультатИт=ПолучитьЦенуИКолОстаткоаПо105Счету(ГСМ,КБК,ОтветственныйГараж);
//     Цена = РезультатИт.Получить("Цена");
//     КолвоОст = РезультатИт.Получить("КолвоОст");
Функция ПолучитьЦенуИКолОстаткаПо105Счету(РабочаяФирма,ДатаОст,СчетОст,Номенклатура,ФКР="",МОЛ="") Экспорт
		
	//определение осттаокв кол-ва по отбору
	КолвоОст=0;
	СуммаОбщая=0;
	Би = СоздатьОбъект("БухгалтерскиеИтоги");
	Би.ИспользоватьРазделительУчета(РабочаяФирма); 
	Би.ИспользоватьСубконто(ВидыСубконто.Номенклатура,Номенклатура,1,0);
	Би.ИспользоватьСубконто(ВидыСубконто.ФКР,ФКР,2,0);
	Би.ИспользоватьСубконто(ВидыСубконто.МестаХранения,МОЛ,2,0);
	Би.ВыполнитьЗапрос(,ДатаОст,СчетОст,,,1);
	Би.ВыбратьСубконто(ВидыСубконто.Номенклатура);
	Пока Би.ПолучитьСубконто(ВидыСубконто.Номенклатура) = 1 Цикл
		КолвоОст = Би.СКД("К");
	КонецЦикла;
	
	//расчет цены
	ЦенаИт=0;
	КолвоОст2=0;
	СуммаОбщая2=0;
	Би = СоздатьОбъект("БухгалтерскиеИтоги");
	Би.ИспользоватьРазделительУчета(РабочаяФирма); 
	Би.ИспользоватьСубконто(ВидыСубконто.Номенклатура,Номенклатура,1,0);
	Би.ВыполнитьЗапрос(,ДатаОст,СчетОст,,,1);
	Би.ВыбратьСубконто(ВидыСубконто.Номенклатура);
	Пока Би.ПолучитьСубконто(ВидыСубконто.Номенклатура) = 1 Цикл
		СуммаОбщая2 = Би.СКД("С");
		КолвоОст2 = Би.СКД("К");
	КонецЦикла;
	ЦенаИт=Окр(?(КолвоОст2=0,0,СуммаОбщая2/КолвоОст2),2);
	
	//завершение
	Результат=СоздатьОбъект("СписокЗначений");
	Результат.ДобавитьЗначение(ЦенаИт,"Цена");
	Результат.ДобавитьЗначение(КолвоОст,"КолвоОст");
	Возврат Результат;
	
КонецФункции
